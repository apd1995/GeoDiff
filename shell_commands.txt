export GCSFUSE_REPO=gcsfuse-`lsb_release -c -s`
echo "deb https://packages.cloud.google.com/apt $GCSFUSE_REPO main" | sudo tee /etc/apt/sources.list.d/gcsfuse.list
curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
sudo apt-get update
sudo apt-get install fuse gcsfuse
gcsfuse -v

gcloud auth application-default login
mkdir "$HOME/bucket"
gcsfuse --implicit-dirs hs-deep-lab-donoho-seasia "$HOME/bucket"

fusermount -u "$HOME/bucket"



conda create -n geodiff python=3.10 -c conda-forge
conda activate geodiff
conda install PyYAML EasyDict
conda install pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia
conda install pyg=*=*cu* -c pyg


python test.py ../bucket/data/GEOM/checkpoints/${iter}.pt --start_idx 800 --end_idx 1000
python test.py ./logs/drugs_1k_default_2024_03_24__22_50_36/checkpoints/100000.pt --test_set ../bucket/data/GEOM/Drugs/train_data_40k.pkl --start_idx 0 --end_idx 100 --n_steps 1000
python test.py ./logs/drugs_1k_default_2024_03_24__22_50_36/checkpoints/100000.pt --test_set ../bucket/data/GEOM/Drugs/train_data_40k.pkl --start_idx 1259 --end_idx 4000 --n_steps 1000
